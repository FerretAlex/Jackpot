<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Registration â€” Jackpot</title>

  <script>
    tailwind.config = {theme: {extend: {colors: {
            jp: {
              bg: "#F7F7F5",
              text: "#0F172A",
              muted: "#475569",
              card: "#FFFFFF",
              border: "rgba(15, 23, 42, 0.10)",
              gold: "#D4AF37",
              gold2: "#FFD36A",
              ink: "#111827"
            }
          },
          boxShadow: {
            soft: "0 12px 30px rgba(15, 23, 42, 0.08)",
            lift: "0 18px 40px rgba(15, 23, 42, 0.12)"
          }
  }}}
  </script>
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    body {
      background:
        radial-gradient(900px 450px at 80% 0%, rgba(212,175,55,0.14), transparent 60%),
        radial-gradient(700px 380px at 10% 10%, rgba(255,211,106,0.10), transparent 60%),
        radial-gradient(rgba(15,23,42,0.06) 1px, transparent 1px);
      background-size: auto, auto, 18px 18px;
      background-position: 0 0, 0 0, 0 0;
    }

    .chip {
      padding: 0.28rem 0.75rem;
      font-size: 0.875rem;
      border-radius: 9999px;
      border: 1px solid rgba(15, 23, 42, 0.14);
      background: #fff;
      color: rgba(15, 23, 42, 0.72);
      cursor: pointer;
      transition: 0.16s ease;
      user-select: none;
    }
    .chip:hover {
      border-color: rgba(15, 23, 42, 0.22);
      color: rgba(15, 23, 42, 0.90);
    }
    .chip.active {
      background: rgba(212,175,55,0.18);
      border-color: rgba(212,175,55,0.55);
      color: #111827;
    }
  </style>
</head>

<body class="bg-jp-bg text-jp-text min-h-screen flex items-center justify-center antialiased">
  <div class="max-w-md w-full px-4">
    <div class="bg-jp-card border border-jp-border shadow-soft rounded-2xl p-7 sm:p-8">
      <div class="text-center">
        <h1 class="text-2xl font-semibold tracking-wide">Registration</h1>
        <p class="text-sm text-jp-muted mt-1">Make an account</p>
      </div>
     
      <div class="mt-6 space-y-4">
        <div>
          <label class="block text-sm text-jp-muted mb-1">Name</label>
          <input id="name" type="text"
                 class="w-full rounded-lg border border-jp-border bg-white px-3 py-2 text-sm text-jp-text outline-none
                        focus:ring-2 focus:ring-[rgba(212,175,55,0.35)]"
                 placeholder="Your name" autocomplete="name">
        </div>

        <div>
          <label class="block text-sm text-jp-muted mb-1">Email</label>
          <input id="email" type="email"
                 class="w-full rounded-lg border border-jp-border bg-white px-3 py-2 text-sm text-jp-text outline-none
                        focus:ring-2 focus:ring-[rgba(212,175,55,0.35)]"
                 placeholder="you@example.com" autocomplete="email">
        </div>

        <div>
          <label class="block text-sm text-jp-muted mb-1">Password</label>
          <input id="password" type="password"
                 class="w-full rounded-lg border border-jp-border bg-white px-3 py-2 text-sm text-jp-text outline-none
                        focus:ring-2 focus:ring-[rgba(212,175,55,0.35)]"
                 placeholder="Minimum of 6 symbols" autocomplete="new-password">
        </div>

        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="block text-sm text-jp-muted mb-1">Age</label>
            <input id="age" type="number" min="16" max="99"
                   class="w-full rounded-lg border border-jp-border bg-white px-3 py-2 text-sm text-jp-text outline-none
                          focus:ring-2 focus:ring-[rgba(212,175,55,0.35)]"
                   placeholder="18">
          </div>

          <div>
            <label class="block text-sm text-jp-muted mb-1">Gender</label>
            <select id="gender"
                    class="w-full rounded-lg border border-jp-border bg-white px-3 py-2 text-sm text-jp-text outline-none
                           focus:ring-2 focus:ring-[rgba(212,175,55,0.35)]">
              <option value="">Select gender</option>
              <option value="male">Male</option>
              <option value="female">Female</option>
              <option value="other">Prefer not to say</option>
            </select>
          </div>
        </div>

        <div>
          <label class="block text-sm text-jp-muted mb-1">Faculty</label>
          <select id="faculty"
                  class="w-full rounded-lg border border-jp-border bg-white px-3 py-2 text-sm text-jp-text outline-none
                         focus:ring-2 focus:ring-[rgba(212,175,55,0.35)]">
            <option value="">Select faculty</option>
            <option value="Engineering">Faculty of Civil and Mechanical Engineering</option>
            <option value="NaturalSciences">Faculty of Natural Sciences and Technology</option>
            <option value="IT">Faculty of Computer Science, Information Technology and Energy</option>
            <option value="Economics">Faculty of Engineering Economics and Management</option>
            <option value="Management">Institute of Architecture and Design</option>
            <option value="Architecture">Riga Business School</option>
            <option value="MaritimeAcademy">Latvian Maritime Academy of Riga Technical University</option>
            <option value="Liepaja">RTU Liepaja</option>
            <option value="Rezekne">RTU Rezekne</option>
          </select>
        </div>

        <div>
          <label class="block text-sm text-jp-muted mb-1">Course</label>
          <select id="course"
                  class="w-full rounded-lg border border-jp-border bg-white px-3 py-2 text-sm text-jp-text outline-none
                         focus:ring-2 focus:ring-[rgba(212,175,55,0.35)]">
            <option value="">Select your course</option>
            <option value="1">Bachelor 1</option>
            <option value="2">Bachelor 2</option>
            <option value="3">Bachelor 3</option>
            <option value="4">Bachelor 4</option>
            <option value="5">Master 1</option>
            <option value="6">Master 2</option>
            <option value="7">PhD</option>
          </select>
        </div>

        <div>
          <div class="flex items-center justify-between gap-3">
            <label class="block text-sm text-jp-muted">Interests</label>
            <span class="text-xs text-jp-muted"><span id="interestCount">0</span> selected</span>
          </div>

          <div id="interest-chips" class="flex flex-wrap gap-2 mt-2">
            <button type="button" data-value="sports" class="chip">Sport</button>
            <button type="button" data-value="music" class="chip">Music</button>
            <button type="button" data-value="movies" class="chip">Movies</button>
            <button type="button" data-value="BoardGaming" class="chip">Board games</button>
            <button type="button" data-value="CompGaming" class="chip">Computer games</button>
            <button type="button" data-value="travel" class="chip">Travel</button>
            <button type="button" data-value="food" class="chip">Food</button>
            <button type="button" data-value="astrology" class="chip">Astrology</button>
            <button type="button" data-value="science" class="chip">Science</button>
            <button type="button" data-value="art" class="chip">Art</button>
          </div>

          <input type="hidden" id="interests" />
          <p class="text-xs text-jp-muted mt-2">Choose your interests</p>
        </div>

        <div>
          <label class="block text-sm text-jp-muted mb-1">About me</label>
          <textarea id="about" rows="3"
                    class="w-full rounded-lg border border-jp-border bg-white px-3 py-2 text-sm text-jp-text outline-none
                           focus:ring-2 focus:ring-[rgba(212,175,55,0.35)]"
                    placeholder="Tell more about you"></textarea>
        </div>

        <button onclick="registerUser()"
         class="w-full rounded-xl py-3 text-sm font-semibold text-white bg-[#C9A227] hover:brightness-95 active:translate-y-px transition shadow-soft">
          Register
        </button>

      </div>

      <p class="text-xs text-jp-muted text-center mt-5">
        Already have an account?
        <a href="login.html" class="text-jp-text hover:underline decoration-[rgba(212,175,55,0.8)] underline-offset-4">
          Log-in
        </a>
      </p>

      <p id="error" class="text-xs text-red-600 text-center mt-3 hidden"></p>
      <p id="ok" class="text-xs text-emerald-700 text-center mt-3 hidden"></p>
    </div>

    <p class="text-[11px] text-jp-muted text-center mt-4">
      You can edit your profile later.
    </p>
  </div>

  <script>
    let selectedInterests = [];

    document.addEventListener("DOMContentLoaded", () => {
      const chips = document.querySelectorAll("#interest-chips .chip");
      const countEl = document.getElementById("interestCount");

      function sync() {
        document.getElementById("interests").value = JSON.stringify(selectedInterests);
        if (countEl) countEl.textContent = String(selectedInterests.length);
      }

      chips.forEach(chip => {
        chip.addEventListener("click", () => {
          const value = chip.dataset.value;
          chip.classList.toggle("active");

          if (chip.classList.contains("active")) {
            if (!selectedInterests.includes(value)) selectedInterests.push(value);
          } else {
            selectedInterests = selectedInterests.filter(x => x !== value);
          }
          sync();
        });
      });

      sync();
    });

    async function registerUser() {
      const get = id => document.getElementById(id).value.trim();

      const payload = {
        name: get("name"),
        email: get("email"),
        password: get("password"),
        age: Number(get("age")),
        gender: get("gender"),
        faculty: get("faculty"),
        course: Number(get("course")),
        interests: selectedInterests,
        about: get("about")
      };

      const errorBox = document.getElementById("error");
      const okBox = document.getElementById("ok");
      errorBox.classList.add("hidden");
      okBox.classList.add("hidden");

      const res = await fetch("/api/register", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload)
      });

      const data = await res.json();

      if (data.error) {
        errorBox.textContent = data.error;
        errorBox.classList.remove("hidden");
        return;
      }

      okBox.textContent = "Registration was successful. You can log in now.";
      okBox.classList.remove("hidden");

      setTimeout(() => window.location.href = "login.html", 1200);
    }
  </script>
</body>
</html>
